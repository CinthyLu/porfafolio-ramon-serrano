<div class="admin-dashboard panel-admin">
  <h1>ğŸ“Š Dashboard Administrativo</h1>
  <p>Visualiza estadÃ­sticas y mÃ©tricas principales</p>

  <div *ngIf="loading" class="loading">
    <p>Cargando estadÃ­sticas...</p>
  </div>

  <div *ngIf="error" class="error-message">
    <p>âŒ {{ error }}</p>
    <button class="btn btn-primary" (click)="loadDashboard()">Reintentar</button>
  </div>

  <div *ngIf="!loading && stats" class="dashboard-content">
    <!-- Tarjetas de estadÃ­sticas -->
    <div class="stats-cards">
      <div class="stat-card">
        <h3>Proyectos Totales</h3>
        <div class="stat-value">{{ stats.totalProjects }}</div>
        <p class="stat-label">Proyectos en el sistema</p>
      </div>

      <div class="stat-card">
        <h3>AsesorÃ­as Totales</h3>
        <div class="stat-value">{{ stats.totalAdvisories }}</div>
        <p class="stat-label">AsesorÃ­as registradas</p>
      </div>

      <div class="stat-card highlight">
        <h3>AsesorÃ­as Completadas</h3>
        <div class="stat-value success">{{ stats.completedAdvisories }}</div>
        <p class="stat-label">{{ getPercentage(stats.completedAdvisories, stats.totalAdvisories) }}%</p>
      </div>

      <div class="stat-card highlight">
        <h3>AsesorÃ­as Pendientes</h3>
        <div class="stat-value warning">{{ stats.pendingAdvisories }}</div>
        <p class="stat-label">Requieren atenciÃ³n</p>
      </div>
    </div>

    <!-- Estado de asesorÃ­as -->
    <div class="section">
      <h2>Estado de AsesorÃ­as</h2>
      <div class="status-grid">
        <div *ngFor="let status of (stats.advisoryCountByStatus | keyvalue)" class="status-item">
          <span class="status-name">{{ status.key }}</span>
          <span class="status-count">{{ status.value }}</span>
        </div>
      </div>
    </div>

    <!-- TecnologÃ­as principales -->
    <div class="section">
      <h2>TecnologÃ­as MÃ¡s Usadas</h2>
      <div class="tech-list">
        <div *ngFor="let tech of stats.topTechnologies" class="tech-item">
          <div class="tech-bar">
            <div 
              class="tech-fill" 
              [style.width.%]="(tech.count / (stats.topTechnologies[0]?.count || 1)) * 100">
              {{ tech.technology }}
            </div>
          </div>
          <span class="tech-count">{{ tech.count }}</span>
        </div>
      </div>
    </div>
  </div>

  <!-- Acciones rÃ¡pidas -->
  <div class="quick-actions">
    <h3>Acciones RÃ¡pidas</h3>
    <button class="btn btn-primary" routerLink="/users">
      ğŸ‘¥ Gestionar Usuarios
    </button>
    <button class="btn btn-secondary" routerLink="/projects">
      ğŸ“ Ver Proyectos
    </button>
    <button class="btn btn-secondary" routerLink="/">
      ğŸ  Volver a Home
    </button>
  </div>
</div>
