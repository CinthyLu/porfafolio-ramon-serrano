<div class="appointments-wrapper">
  <div class="appointments-card">
    <h2 class="title">Mis Solicitudes de Asesoría</h2>

    <!-- Notifications -->
    <div class="notification" *ngIf="notification.visible" [ngClass]="notification.type">
      {{ notification.message }}
    </div>

    <div *ngIf="loading" class="loading-wrapper">
      <div class="spinner"></div>
      <p>Cargando solicitudes...</p>
    </div>

    <table class="styled-table" *ngIf="!loading && advisories.length > 0">
      <thead>
        <tr>
          <th>Programador</th>
          <th>Fecha y Hora</th>
          <th>Comentario</th>
          <th>Estado</th>
          <th>Acciones</th>
        </tr>
      </thead>

      <tbody>
        <tr *ngFor="let a of advisories">
          <td class="email-cell">{{ a.programmerName || a.programmerId }}</td>

          <td>{{ a.scheduledAt | date : 'dd/MM/yyyy HH:mm' }}</td>

          <td class="comment">{{ a.requestComment || '—' }}</td>

          <td>
            <span class="status-badge" [ngClass]="getStatusColor(a.status)">
              {{ getStatusLabel(a.status) }}
            </span>
          </td>

          <td class="actions">
            <button *ngIf="a.status === 'PENDING'" class="btn-cancel" (click)="cancelAdvisory(a)">
              Cancelar
            </button>

            <span *ngIf="a.responseMessage" class="response-msg">
              {{ a.responseMessage }}
            </span>

            <span *ngIf="a.status !== 'PENDING' && !a.responseMessage">—</span>
          </td>
        </tr>
      </tbody>
    </table>

    <div *ngIf="!loading && advisories.length === 0" class="empty-state">
      No has realizado solicitudes todavía.
      <br>
      <a routerLink="/consulting" class="btn-primary">Solicitar una asesoría</a>
    </div>

    <div class="footer">
      <button class="btn-secondary" routerLink="/">Volver</button>
    </div>
  </div>
</div>